# 7.2 - Elastic Load Balancing (ELB) Overview

## Key Concepts

### 1. What is a Load Balancer?
- A server (or set of servers) that **forwards incoming traffic** to multiple backend EC2 instances
- Users connect to the load balancer → it distributes requests across instances
- Users only see **one endpoint** — they don't know which backend instance handles their request

### 2. Why Use a Load Balancer?
- **Spread load** across multiple downstream instances
- **Single point of access** (one DNS endpoint) for your application
- **Health checks** — detect and avoid sending traffic to unhealthy instances
- **SSL termination** — handle HTTPS at the load balancer
- **Stickiness** with cookies — keep a user on the same instance
- **High availability** across AZs
- **Separate public from private traffic**

### 3. Elastic Load Balancer (ELB) — Managed Service
- AWS manages it: upgrades, maintenance, high availability
- Less effort and cost than running your own load balancer
- Integrated with: EC2, ASG, ECS, Certificate Manager, CloudWatch, Route 53, WAF, Global Accelerator

### 4. Health Checks
- ELB verifies if EC2 instances are working properly
- Done on a **port + route** (e.g., HTTP on port 4567, endpoint `/health`)
- If the instance responds with **HTTP 200 (OK)** → healthy
- If not → **unhealthy** → ELB stops sending traffic to it

### 5. Four Types of Load Balancers

| Type                        | Abbrev. | Year | Protocols                    | Status     |
|-----------------------------|---------|------|------------------------------|------------|
| Classic Load Balancer       | CLB     | 2009 | HTTP, HTTPS, TCP, SSL        | Deprecated |
| Application Load Balancer   | ALB     | 2016 | HTTP, HTTPS, WebSocket       | Current ✅ |
| Network Load Balancer       | NLB     | 2017 | TCP, TLS, UDP                | Current ✅ |
| Gateway Load Balancer       | GWLB    | 2020 | Layer 3 (IP protocol)        | Current ✅ |

- Always use the **newer generation** (ALB, NLB, GWLB) — more features
- Load balancers can be **public** (external, internet-facing) or **private** (internal)

### 6. Security Groups Pattern

```
Users ──► [ELB Security Group] ──► [EC2 Security Group]
          Port 80/443                Port 80
          Source: 0.0.0.0/0          Source: ELB security group
          (anywhere)                 (only from load balancer)
```

- ELB SG: allows HTTP/HTTPS from **anywhere** (0.0.0.0/0)
- EC2 SG: allows HTTP only from the **ELB's security group** (not from IPs)
- This ensures EC2 instances only accept traffic through the load balancer

---

## Exam Tips
- ELB = managed load balancer, AWS handles availability and maintenance
- Health checks: port + route, HTTP 200 = healthy
- CLB is deprecated — use ALB, NLB, or GWLB
- ALB = HTTP/HTTPS/WebSocket; NLB = TCP/UDP/TLS; GWLB = Layer 3 (IP)
- Security group pattern: ELB open to internet, EC2 only accepts from ELB SG
- Load balancers can be public or private (internal)
- **Exam trap:** "ELB provides a..." → **static DNS name** (not a static IP — only NLB has static IPs)
