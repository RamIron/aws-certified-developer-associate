# 7.17 - Auto Scaling Groups - Scaling Policies

## Key Concepts

### 1. Types of Scaling Policies

| Type | How It Works | Example |
|------|-------------|---------|
| **Target Tracking** | Set a metric + target value, ASG adjusts automatically | "Keep average CPU at 40%" |
| **Simple / Step** | CloudWatch alarm triggers → add or remove X instances | "If CPU > 70%, add 2 instances" |
| **Scheduled** | Scale at a specific time based on known patterns | "Every Friday at 5 PM, set min capacity to 10" |
| **Predictive** | AWS analyzes historical load, forecasts future, schedules scaling ahead of time | Cyclical patterns (e.g., traffic spikes every morning) |

### 2. Good Metrics to Scale On

| Metric | When to Use |
|--------|-------------|
| **Average CPU Utilization** | General purpose — most common metric |
| **RequestCountPerTarget** | When you know the optimal number of requests per instance (e.g., 1,000) |
| **Average Network In/Out** | Network-bound apps (uploads/downloads) |
| **Custom CloudWatch metric** | Application-specific metrics |

### 3. Scaling Cooldown

- After any scaling activity, the ASG enters a **cooldown period**
- Default: **300 seconds** (5 minutes)
- During cooldown, the ASG **will NOT launch or terminate** additional instances
- Purpose: allow metrics to **stabilize** before making more scaling decisions

```
Scale out ──► Cooldown (300s) ──► Check metrics again ──► Scale if needed
  (+2 instances)   (no actions)      (stabilized?)
```

**Tips to optimize cooldown:**
- Use a **ready-to-use AMI** → instances serve requests faster → cooldown can be shorter
- Enable **detailed monitoring** → metrics update every 1 minute (instead of 5)

---

## Exam Tips
- **Target tracking** = simplest: set a metric target, ASG handles the rest
- **Simple/Step** = alarm-based: CloudWatch alarm triggers scaling actions
- **Scheduled** = time-based: known usage patterns
- **Predictive** = ML-based: forecasts from historical data
- **Cooldown** = 300 seconds default, prevents rapid successive scaling actions
- Best metrics: CPU utilization, RequestCountPerTarget, network in/out, custom metrics
- Ready-to-use AMI + detailed monitoring = faster, more responsive scaling
- **Exam trap:** "average number of connections around X" → Target Tracking (not step/simple)
- **Exam trap:** "scale based on application-specific metric (e.g., DB requests)" → Custom CloudWatch Metric, NOT detailed monitoring
