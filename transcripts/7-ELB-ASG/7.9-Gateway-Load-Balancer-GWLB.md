# 7.9 - Gateway Load Balancer (GWLB)

## Key Concepts

### 1. What is GWLB?
- Used to deploy, scale, and manage **third-party network virtual appliances** in AWS
- Operates at **Layer 3** (Network layer — IP packets)
- Uses the **GENEVE protocol on port 6081**

### 2. Use Cases
- **Firewalls** — inspect and drop unwanted traffic
- **Intrusion Detection & Prevention Systems (IDPS)**
- **Deep Packet Inspection**
- **Payload modification** at the network level

### 3. How It Works

```
Without GWLB:                    With GWLB:

[Users] ──► [ALB] ──► [App]     [Users]
                                     │
                                     ▼
                                 [GWLB] ──► [Virtual Appliances]
                                     │         (firewall, IDPS, etc.)
                                     │         inspect traffic
                                     │         ├── DROP ❌ (bad traffic)
                                     │         └── OK ✅ → back to GWLB
                                     ▼
                                 [Application]
```

**Two functions in one:**
1. **Transparent Network Gateway** — single entry/exit point for all VPC traffic
2. **Load Balancer** — distributes traffic across a fleet of virtual appliances

### 4. Target Groups

| Target Type   | Notes                                           |
|---------------|-------------------------------------------------|
| EC2 Instances | Registered by instance ID (virtual appliances)  |
| IP Addresses  | Must be **private IPs** (e.g., on-premises appliances) |

---

## Exam Tips
- GWLB = **Layer 3** (IP packets) — lowest level of all load balancers
- Used for **network traffic inspection** (firewalls, IDPS, deep packet inspection)
- See **GENEVE protocol** or **port 6081** → GWLB
- All traffic goes through GWLB → virtual appliances inspect → approved traffic returns to app
- Target groups: EC2 instances or private IPs only (no ALB, no Lambda)
- High-level understanding is enough — no deep dive expected on the exam
