# 7.15 - Auto Scaling Groups (ASG) Overview

## Key Concepts

### 1. What is an Auto Scaling Group?
- Automatically **adds** (scale out) or **removes** (scale in) EC2 instances based on load
- You define **minimum**, **desired**, and **maximum** capacity
- ASGs are **free** — you only pay for the EC2 instances created

```
◄─────────────────── Maximum Capacity (7) ───────────────────►
◄─────────── Desired Capacity (4) ───────────►
◄──── Min (2) ────►

  [EC2] [EC2] [EC2] [EC2]  ...can grow to...  [EC2] [EC2] [EC2]
   ▲                                                          ▲
   min                                                       max
```

### 2. ASG + Load Balancer Integration

```
                              ┌─── EC2-A ──┐
                              │            │
Users ──► [Load Balancer] ────┼─── EC2-B   ├── All registered
                              │            │   in ASG
                              ├─── EC2-C   │
                              │            │
                              └─── EC2-D ──┘
                                     │
                          ELB health checks ──► ASG terminates
                          detect unhealthy      unhealthy instance
                          instance              & launches replacement
```

- New instances are **automatically registered** with the ELB
- ELB health checks are **passed to the ASG** — unhealthy instances are terminated and replaced
- Scale out → ELB automatically sends traffic to new instances too

### 3. Launch Template
- Defines **how to launch EC2 instances** within the ASG
- Contains: AMI, instance type, user data, EBS volumes, security groups, SSH key pair, IAM roles, network/subnet info, load balancer info
- Replaces the deprecated "launch configurations"

### 4. Scaling with CloudWatch Alarms
- ASG can scale based on **CloudWatch alarms**
- Example: if average CPU across all ASG instances is too high → **scale out** (add instances)
- If average CPU drops → **scale in** (remove instances)
- Can use any metric: average CPU, custom metrics, etc.
- This is what makes it **auto** scaling — alarms trigger scaling automatically

---

## Exam Tips
- Scale out = add instances | Scale in = remove instances
- ASG has 3 capacity settings: **minimum**, **desired**, **maximum**
- ASGs are free — you pay for the underlying EC2 instances
- ASG + ELB: unhealthy instances are terminated and replaced automatically
- **Launch template** defines how EC2 instances are created (replaces deprecated launch configurations)
- CloudWatch alarms trigger scaling policies (scale out / scale in)
