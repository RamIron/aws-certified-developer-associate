# 8.7 - RDS Proxy

## Key Concepts

### 1. What is RDS Proxy?
- A **fully managed database proxy** for RDS and Aurora
- Deployed within your **VPC** — never publicly accessible
- **Serverless**, auto-scaling, highly available (multi-AZ)
- No code changes needed — just point your app to the proxy instead of the DB

### 2. Connection Pooling

The main purpose: **pool and share database connections**.

```
Without RDS Proxy:                    With RDS Proxy:

[App 1] ──┐                          [App 1] ──┐
[App 2] ──┼──► [RDS DB]              [App 2] ──┼──► [RDS Proxy] ──► [RDS DB]
[App 3] ──┤   (many connections,     [App 3] ──┤    (pools into     (fewer
[App 4] ──┤    high CPU/RAM)         [App 4] ──┤     fewer           connections,
[App 5] ──┘                          [App 5] ──┘     connections)    less stress)
```

- Reduces stress on database resources (CPU, RAM)
- Minimizes open connections and timeouts
- Especially useful for **Lambda functions** — they can spin up thousands of instances, each opening a DB connection

### 3. Faster Failover
- Reduces failover time by up to **66%** for RDS and Aurora
- Apps connect to the proxy → proxy handles the failover internally
- Your app doesn't need to handle failover logic

```
[Apps] ──► [RDS Proxy] ──► [Primary DB (AZ-A)]
                │                   ❌ fails
                │           [Standby DB (AZ-B)] ← promoted
                └──────────► (proxy redirects, 66% faster)
```

### 4. IAM Authentication & Secrets Manager
- Enforce **IAM authentication** for database access
- Credentials stored securely in **AWS Secrets Manager**

### 5. Supported Engines

| RDS Engine | RDS Proxy Support |
|---|---|
| MySQL | ✅ |
| PostgreSQL | ✅ |
| MariaDB | ✅ |
| Microsoft SQL Server | ✅ |
| Aurora (MySQL & PostgreSQL) | ✅ |
| Oracle | ❌ |
| IBM DB2 | ❌ |

### 6. Lambda + RDS Proxy
- Lambda functions scale rapidly (hundreds/thousands of instances)
- Each instance opens a DB connection → overwhelms the database
- RDS Proxy pools all Lambda connections into fewer DB connections
- This is the recommended pattern for Lambda → RDS/Aurora

---

## Exam Tips
- RDS Proxy = **connection pooling** → reduces DB stress (CPU, RAM, open connections)
- Reduces failover time by up to **66%**
- Enforce **IAM authentication** + credentials in **Secrets Manager**
- **Never publicly accessible** — VPC only
- Serverless, auto-scaling, multi-AZ
- See **Lambda + RDS** → think **RDS Proxy**
- No code changes needed — just change the connection endpoint
