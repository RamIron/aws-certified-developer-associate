# 8.4 - Amazon Aurora

## Key Concepts

### 1. What is Aurora?
- **AWS proprietary** database (not open-source)
- Compatible with **PostgreSQL** and **MySQL** drivers (connect as if it were Postgres/MySQL)
- **Cloud-optimized**: 5x faster than MySQL on RDS, 3x faster than PostgreSQL on RDS
- ~20% more expensive than RDS, but much more efficient at scale
- Storage **auto-grows** from 10 GB up to **256 TB** — no need to monitor disk

### 2. High Availability & Storage

- Stores **6 copies** of your data across **3 AZs**
- Only needs **4/6 copies for writes** and **3/6 copies for reads**
- **Self-healing**: corrupted data is repaired via peer-to-peer replication
- Data spread across **hundreds of volumes** (reduces risk)

```
        AZ-A              AZ-B              AZ-C
   ┌────────────┐    ┌────────────┐    ┌────────────┐
   │  copy 1    │    │  copy 3    │    │  copy 5    │
   │  copy 2    │    │  copy 4    │    │  copy 6    │
   └────────────┘    └────────────┘    └────────────┘
              Shared Storage Volume
         (auto-expanding, self-healing)
```

### 3. Master + Read Replicas

- **One master** instance handles all writes
- Up to **15 Read Replicas** for read scaling
- Replica lag: typically **< 10 milliseconds**
- Failover: **< 30 seconds** on average
- Any Read Replica can be **promoted to master** on failover
- Supports **cross-region replication**
- Read Replicas support **auto-scaling** (1 to 15)

### 4. Aurora Endpoints (Critical for Exam)

```
                        Writer Endpoint (DNS)
                              │
                              ▼
Client ──writes──►       [Master]
                              │
                        writes to shared storage
                              │
Client ──reads──►        Reader Endpoint (DNS)
                              │
                    ┌─────────┼─────────┐
                    ▼         ▼         ▼
              [Replica 1] [Replica 2] [Replica 3]
                    │         │         │
                    └─────────┼─────────┘
                        reads from shared storage
                   (auto-scaling: 1 to 15 replicas)
```

| Endpoint | Points To | Purpose |
|----------|-----------|---------|
| **Writer Endpoint** | Always the master | Writes — auto-redirects on failover |
| **Reader Endpoint** | All read replicas (load balanced) | Reads — connection-level load balancing |

- Load balancing happens at the **connection level**, not the statement level

### 5. Additional Features
- Automatic failover, backup and recovery
- Automated patching with **zero downtime**
- **Backtrack**: restore data to any point in time without relying on backups

---

## Exam Tips
- Aurora = AWS proprietary, compatible with MySQL & PostgreSQL
- 5x MySQL / 3x PostgreSQL performance improvement
- Storage: auto-grows 10 GB → 256 TB, 6 copies across 3 AZs, self-healing
- **Writer Endpoint** → always points to master (even after failover)
- **Reader Endpoint** → load balances across all read replicas (connection level)
- Up to 15 Read Replicas with auto-scaling, < 10ms replica lag
- Failover < 30 seconds, any replica can become master
- Backtrack = restore to any point in time without backups
