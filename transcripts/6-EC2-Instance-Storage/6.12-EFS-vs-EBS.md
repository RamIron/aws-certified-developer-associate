# 6.12 - EFS vs EBS

## Key Concepts

### EBS Summary
- Attached to **one instance at a time** (exception: io1/io2 Multi-Attach)
- **AZ-locked** — cannot attach to an instance in a different AZ
- **gp2:** IOPS scale with disk size
- **gp3 / io1:** IOPS scale independently from disk size
- Migrate across AZs: take a **snapshot** → restore in target AZ
- **Backups use IO** — avoid running during high traffic
- Root EBS volume **deleted by default** when EC2 terminates (can be disabled)

### EFS Summary
- **Network file system** — mountable by hundreds of instances across AZs
- Uses **mount targets** per AZ to allow cross-AZ access
- **Linux only** (POSIX file system)
- **Higher price** than EBS, but storage tiers reduce cost

### Instance Store Summary
- **Physically attached** to the EC2 host
- **Ephemeral** — data lost when the EC2 instance is terminated

---

## Comparison Table

| Feature              | EBS                        | EFS                          | Instance Store        |
|----------------------|----------------------------|------------------------------|-----------------------|
| Attachment           | 1 instance (io1/io2: up to 16) | Hundreds of instances     | 1 instance (physical) |
| AZ scope             | Locked to 1 AZ             | Cross-AZ (mount targets)     | Locked to 1 AZ        |
| Persistence          | Persistent                 | Persistent                   | Ephemeral             |
| OS compatibility     | Linux + Windows            | Linux only (POSIX)           | Linux + Windows       |
| Cost                 | Mid                        | Higher (tiers help)          | Included with instance|
| Use case             | Block storage, databases   | Shared files, web, WordPress | High IOPS cache       |

---

## Exam Tips
- EBS = one instance, one AZ; EFS = many instances, many AZs
- Migrate EBS across AZs → snapshot + restore
- EBS backups consume IO — don't run under heavy load
- EFS is Linux only — Windows cannot use it
- Instance Store = fastest but ephemeral — data gone on termination
- Root EBS volume deleted on EC2 termination by default (configurable)
